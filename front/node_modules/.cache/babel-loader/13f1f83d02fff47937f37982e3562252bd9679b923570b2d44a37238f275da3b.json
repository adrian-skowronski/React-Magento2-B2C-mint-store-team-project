{"ast":null,"code":"var _jsxFileName = \"/home/adrian-skowronski/www/mint/front/src/pages/Checkout/PaymentPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useCart } from '../../context/CartContext';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PaymentPage = () => {\n  _s();\n  const {\n    items,\n    total,\n    clearCart,\n    setPaymentMethod,\n    placeOrder,\n    shippingAddress\n  } = useCart();\n  const [paymentMethod, setPaymentMethodState] = useState(\"checkmo\");\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const navigate = useNavigate();\n  const handlePaymentMethodChange = e => {\n    setPaymentMethodState(e.target.value);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError(null);\n    try {\n      if (shippingAddress) {\n        await setPaymentMethod(paymentMethod);\n        const orderNumber = await placeOrder();\n        if (orderNumber) {\n          clearCart();\n          navigate(`/order/${orderNumber}`);\n        } else {\n          setError(\"Wystąpił problem z przetworzeniem zamówienia.\");\n        }\n      } else {\n        setError(\"Adres dostawy jest wymagany.\");\n      }\n    } catch (error) {\n      setError(\"Wystąpił błąd podczas składania zamówienia.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"P\\u0142atno\\u015B\\u0107\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Metoda p\\u0142atno\\u015Bci\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          value: \"checkmo\",\n          checked: paymentMethod === 'checkmo',\n          onChange: handlePaymentMethodChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 21\n        }, this), \"P\\u0142atno\\u015B\\u0107 przy odbiorze\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          value: \"banktransfer\",\n          checked: paymentMethod === 'banktransfer',\n          onChange: handlePaymentMethodChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 21\n        }, this), \"Przelew bankowy\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: 'red'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: isLoading,\n        children: isLoading ? 'Przetwarzanie...' : 'Złóż zamówienie'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Podsumowanie zam\\xF3wienia\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: items.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [item.name, \" - \", item.quantity, \" x \", item.price, \" PLN\"]\n      }, item.itemId, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Ca\\u0142kowity koszt: \", total, \" PLN\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n};\n_s(PaymentPage, \"wblRErSzmT4spcOviG8P1tDquPk=\", false, function () {\n  return [useCart, useNavigate];\n});\n_c = PaymentPage;\nexport default PaymentPage;\nvar _c;\n$RefreshReg$(_c, \"PaymentPage\");","map":{"version":3,"names":["React","useState","useCart","useNavigate","jsxDEV","_jsxDEV","PaymentPage","_s","items","total","clearCart","setPaymentMethod","placeOrder","shippingAddress","paymentMethod","setPaymentMethodState","error","setError","isLoading","setIsLoading","navigate","handlePaymentMethodChange","e","target","value","handleSubmit","preventDefault","orderNumber","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","checked","onChange","style","color","disabled","map","item","name","quantity","price","itemId","_c","$RefreshReg$"],"sources":["/home/adrian-skowronski/www/mint/front/src/pages/Checkout/PaymentPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useCart } from '../../context/CartContext';\nimport { useNavigate } from 'react-router-dom';\n\nconst PaymentPage: React.FC = () => {\n    const { items, total, clearCart, setPaymentMethod, placeOrder, shippingAddress } = useCart();\n    const [paymentMethod, setPaymentMethodState] = useState(\"checkmo\");\n    const [error, setError] = useState<string | null>(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const navigate = useNavigate();\n\n    const handlePaymentMethodChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setPaymentMethodState(e.target.value);\n    };\n\n    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        setIsLoading(true);\n        setError(null);\n\n        try {\n            if (shippingAddress) {\n                await setPaymentMethod(paymentMethod);\n                const orderNumber = await placeOrder();\n\n                if (orderNumber) {\n                    clearCart();\n                    navigate(`/order/${orderNumber}`);\n                } else {\n                    setError(\"Wystąpił problem z przetworzeniem zamówienia.\");\n                }\n            } else {\n                setError(\"Adres dostawy jest wymagany.\");\n            }\n        } catch (error) {\n            setError(\"Wystąpił błąd podczas składania zamówienia.\");\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <div>\n            <h2>Płatność</h2>\n            <form onSubmit={handleSubmit}>\n                <h3>Metoda płatności</h3>\n                <label>\n                    <input type=\"radio\" value=\"checkmo\" checked={paymentMethod === 'checkmo'} onChange={handlePaymentMethodChange} />\n                    Płatność przy odbiorze\n                </label>\n                <label>\n                    <input type=\"radio\" value=\"banktransfer\" checked={paymentMethod === 'banktransfer'} onChange={handlePaymentMethodChange} />\n                    Przelew bankowy\n                </label>\n\n                {error && <div style={{ color: 'red' }}>{error}</div>}\n                <button type=\"submit\" disabled={isLoading}>\n                    {isLoading ? 'Przetwarzanie...' : 'Złóż zamówienie'}\n                </button>\n            </form>\n            <h3>Podsumowanie zamówienia</h3>\n            <ul>\n                {items.map(item => (\n                    <li key={item.itemId}>\n                        {item.name} - {item.quantity} x {item.price} PLN\n                    </li>\n                ))}\n            </ul>\n            <p>Całkowity koszt: {total} PLN</p>\n        </div>\n    );\n};\n\nexport default PaymentPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}