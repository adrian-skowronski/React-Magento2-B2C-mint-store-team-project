{"ast":null,"code":"var _jsxFileName = \"/home/adrian-skowronski/www/mint/front/src/pages/Checkout/PaymentPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useCart } from '../../context/CartContext';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PaymentPage = () => {\n  _s();\n  const {\n    items,\n    total,\n    clearCart,\n    setPaymentMethod,\n    placeOrder,\n    setShippingAddress\n  } = useCart();\n  const [shippingAddress, setShippingAddressState] = useState({\n    firstName: '',\n    lastName: '',\n    street: '',\n    city: '',\n    postalCode: '',\n    country: '',\n    telephone: ''\n  });\n  const [paymentMethod, setPaymentMethodState] = useState(\"checkmo\");\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const navigate = useNavigate();\n  const handleShippingChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setShippingAddressState(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handlePaymentMethodChange = e => {\n    setPaymentMethodState(e.target.value);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError(null);\n    try {\n      await setShippingAddress(shippingAddress);\n      await setPaymentMethod(paymentMethod);\n      const orderNumber = await placeOrder();\n      if (orderNumber) {\n        clearCart();\n        navigate(`/order/${orderNumber}`); // Przekierowanie do strony zamówienia\n      } else {\n        setError(\"Wystąpił problem z przetworzeniem zamówienia.\");\n      }\n    } catch (error) {\n      setError(\"Wystąpił błąd podczas składania zamówienia.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"P\\u0142atno\\u015B\\u0107\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Metoda p\\u0142atno\\u015Bci\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          value: \"checkmo\",\n          checked: paymentMethod === 'checkmo',\n          onChange: handlePaymentMethodChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this), \"P\\u0142atno\\u015B\\u0107 przy odbiorze\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          value: \"banktransfer\",\n          checked: paymentMethod === 'banktransfer',\n          onChange: handlePaymentMethodChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this), \"Przelew bankowy\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: 'red'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: isLoading,\n        children: isLoading ? 'Przetwarzanie...' : 'Złóż zamówienie'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Podsumowanie zam\\xF3wienia\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: items.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [item.name, \" - \", item.quantity, \" x \", item.price, \" PLN\"]\n      }, item.itemId, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Ca\\u0142kowity koszt: \", total, \" PLN\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n};\n_s(PaymentPage, \"vj8WB439waMjVhGTzynjJhReU4o=\", false, function () {\n  return [useCart, useNavigate];\n});\n_c = PaymentPage;\nexport default PaymentPage;\nvar _c;\n$RefreshReg$(_c, \"PaymentPage\");","map":{"version":3,"names":["React","useState","useCart","useNavigate","jsxDEV","_jsxDEV","PaymentPage","_s","items","total","clearCart","setPaymentMethod","placeOrder","setShippingAddress","shippingAddress","setShippingAddressState","firstName","lastName","street","city","postalCode","country","telephone","paymentMethod","setPaymentMethodState","error","setError","isLoading","setIsLoading","navigate","handleShippingChange","e","name","value","target","prev","handlePaymentMethodChange","handleSubmit","preventDefault","orderNumber","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","checked","onChange","style","color","disabled","map","item","quantity","price","itemId","_c","$RefreshReg$"],"sources":["/home/adrian-skowronski/www/mint/front/src/pages/Checkout/PaymentPage.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { useCart } from '../../context/CartContext';\nimport { useNavigate } from 'react-router-dom';\n\nconst PaymentPage: React.FC = () => {\n    const { items, total, clearCart, setPaymentMethod, placeOrder, setShippingAddress } = useCart();\n    const [shippingAddress, setShippingAddressState] = useState({\n        firstName: '',\n        lastName: '',\n        street: '',\n        city: '',\n        postalCode: '',\n        country: '',\n        telephone: ''\n    });\n\n\n    const [paymentMethod, setPaymentMethodState] = useState(\"checkmo\");\n    const [error, setError] = useState<string | null>(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const navigate = useNavigate();\n\n    const handleShippingChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setShippingAddressState((prev) => ({ ...prev, [name]: value }));\n    };\n\n    const handlePaymentMethodChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setPaymentMethodState(e.target.value);\n    };\n\n    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        setIsLoading(true);\n        setError(null);\n\n        try {\n            await setShippingAddress(shippingAddress);\n            await setPaymentMethod(paymentMethod);\n            const orderNumber = await placeOrder();\n\n            if (orderNumber) {\n                clearCart();\n                navigate(`/order/${orderNumber}`); // Przekierowanie do strony zamówienia\n            } else {\n                setError(\"Wystąpił problem z przetworzeniem zamówienia.\");\n            }\n        } catch (error) {\n            setError(\"Wystąpił błąd podczas składania zamówienia.\");\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <div>\n            <h2>Płatność</h2>\n            <form onSubmit={handleSubmit}>\n                <h3>Metoda płatności</h3>\n                <label>\n                    <input type=\"radio\" value=\"checkmo\" checked={paymentMethod === 'checkmo'} onChange={handlePaymentMethodChange} />\n                    Płatność przy odbiorze\n                </label>\n                <label>\n                    <input type=\"radio\" value=\"banktransfer\" checked={paymentMethod === 'banktransfer'} onChange={handlePaymentMethodChange} />\n                    Przelew bankowy\n                </label>\n\n                {error && <div style={{ color: 'red' }}>{error}</div>}\n                <button type=\"submit\" disabled={isLoading}>\n                    {isLoading ? 'Przetwarzanie...' : 'Złóż zamówienie'}\n                </button>\n            </form>\n            <h3>Podsumowanie zamówienia</h3>\n            <ul>\n                {items.map(item => (\n                    <li key={item.itemId}>\n                        {item.name} - {item.quantity} x {item.price} PLN\n                    </li>\n                ))}\n            </ul>\n            <p>Całkowity koszt: {total} PLN</p>\n        </div>\n    );\n};\n\nexport default PaymentPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}