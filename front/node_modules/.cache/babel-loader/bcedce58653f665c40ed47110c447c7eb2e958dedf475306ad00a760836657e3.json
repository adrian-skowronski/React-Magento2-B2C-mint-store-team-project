{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./Recommendation.scss';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Recommendation=()=>{const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchProducts=async()=>{const query=`\n                {\n                    products(search: \"\") {\n                        items {\n                            id\n                            name\n                            price {\n                                regularPrice {\n                                    amount {\n                                        value\n                                        currency\n                                    }\n                                }\n                            }\n                            small_image {\n                                url\n                                label\n                            }\n                        }\n                        total_count\n                        page_info {\n                            page_size\n                            current_page\n                        }\n                    }\n                }\n            `;try{const response=await fetch('http://mint.local/graphql',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({query})});const errorText=await response.text();// Pobierz tekst błędu\nthrow new Error(`Network response was not ok: ${response.status} ${errorText}`);const data=await response.json();console.log(data);// Logowanie odpowiedzi\nsetProducts(data.data.products.items);}catch(err){console.error('Fetch error:',err);// Logowanie błędu\nif(err instanceof Error){setError(err.message);}else{setError('An unknown error occurred');}}finally{setLoading(false);}};fetchProducts();},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"recommendationSection\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Recommendations\"}),/*#__PURE__*/_jsx(\"div\",{className:\"product-container\",children:products.map(product=>{var _product$price$regula,_product$price$regula2;return/*#__PURE__*/_jsxs(\"div\",{className:\"product-card\",children:[product.small_image&&product.small_image.url?/*#__PURE__*/_jsx(\"img\",{src:product.small_image.url,alt:product.small_image.label,className:\"product-image\"}):/*#__PURE__*/_jsx(\"p\",{children:\"No image available\"}),/*#__PURE__*/_jsx(\"h2\",{children:product.name}),product.price&&product.price.regularPrice?/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: \",(_product$price$regula=product.price.regularPrice.amount)===null||_product$price$regula===void 0?void 0:_product$price$regula.value,\" \",(_product$price$regula2=product.price.regularPrice.amount)===null||_product$price$regula2===void 0?void 0:_product$price$regula2.currency]}):/*#__PURE__*/_jsx(\"p\",{children:\"Price not available\"})]},product.id);})})]});};export default Recommendation;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Recommendation","products","setProducts","loading","setLoading","error","setError","fetchProducts","query","response","fetch","method","headers","body","JSON","stringify","errorText","text","Error","status","data","json","console","log","items","err","message","children","className","map","product","_product$price$regula","_product$price$regula2","small_image","url","src","alt","label","name","price","regularPrice","amount","value","currency","id"],"sources":["/home/adrian-skowronski/www/mint/front/src/components/Recommendation/Recommendation.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './Recommendation.scss';\n\ninterface Product {\n    id: number;\n    name: string;\n    price?: {\n        regularPrice?: {\n            amount?: {\n                value?: number;\n                currency?: string;\n            };\n        };\n    };\n    small_image?: {\n        url?: string;\n        label?: string;\n    };\n}\n\nconst Recommendation: React.FC = () => {\n    const [products, setProducts] = useState<Product[]>([]);\n    const [loading, setLoading] = useState<boolean>(true);\n    const [error, setError] = useState<string | null>(null);\n\n    useEffect(() => {\n        const fetchProducts = async () => {\n            const query = `\n                {\n                    products(search: \"\") {\n                        items {\n                            id\n                            name\n                            price {\n                                regularPrice {\n                                    amount {\n                                        value\n                                        currency\n                                    }\n                                }\n                            }\n                            small_image {\n                                url\n                                label\n                            }\n                        }\n                        total_count\n                        page_info {\n                            page_size\n                            current_page\n                        }\n                    }\n                }\n            `;\n\n            try {\n                const response = await fetch('http://mint.local/graphql', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({ query }),\n                });\n\n                const errorText = await response.text(); // Pobierz tekst błędu\n                throw new Error(`Network response was not ok: ${response.status} ${errorText}`);\n\n                const data = await response.json();\n                console.log(data); // Logowanie odpowiedzi\n                setProducts(data.data.products.items);\n            } catch (err: unknown) {\n                console.error('Fetch error:', err); // Logowanie błędu\n                if (err instanceof Error) {\n                    setError(err.message);\n                } else {\n                    setError('An unknown error occurred');\n                }\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchProducts();\n    }, []);\n\n    if (loading) {\n        return <div>Loading...</div>;\n    }\n\n    if (error) {\n        return <div>Error: {error}</div>;\n    }\n\n    return (\n        <div className=\"recommendationSection\">\n            <h1>Recommendations</h1>\n            <div className=\"product-container\">\n                {products.map(product => (\n                    <div key={product.id} className=\"product-card\">\n                        {product.small_image && product.small_image.url ? (\n                            <img src={product.small_image.url} alt={product.small_image.label} className=\"product-image\" />\n                        ) : (\n                            <p>No image available</p>\n                        )}\n                        <h2>{product.name}</h2>\n                        {product.price && product.price.regularPrice ? (\n                            <p>\n                                Price: {product.price.regularPrice.amount?.value} {product.price.regularPrice.amount?.currency}\n                            </p>\n                        ) : (\n                            <p>Price not available</p>\n                        )}\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default Recommendation;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}